# RailFence CipherLab - レールフェンス暗号学習ツール

![GitHub Repo stars](https://img.shields.io/github/stars/ipusiron/railfence-cipherlab?style=social)
![GitHub forks](https://img.shields.io/github/forks/ipusiron/railfence-cipherlab?style=social)
![GitHub last commit](https://img.shields.io/github/last-commit/ipusiron/railfence-cipherlab)
![GitHub license](https://img.shields.io/github/license/ipusiron/railfence-cipherlab)

**Day034 - 生成AIで作るセキュリティツール100**

**RailFence CipherLab** は、レールフェンス暗号を視覚的に学べる包括的なWebツールです。
暗号化・復号・座学・実験室の4タブ構成で、古典暗号の理解から実践的な解読演習まで幅広くサポートします。

---

## 🌐 デモページ

👉 [https://ipusiron.github.io/railfence-cipherlab/](https://ipusiron.github.io/railfence-cipherlab/)

---

## 📸 スクリーンショット

> ![方式2（ジグザグ）で暗号化](assets/screenshot.png)
>
> *方式2（ジグザグ）で暗号化*

---

## 🎯 対象ユーザー（ターゲット）

本ツールは以下のようなユーザーを対象としています。

| タイプ | 説明 |
|--------|------|
| 🔰 初学者 | 暗号の基本概念を体験的に学びたい人。とくに転置式暗号（転置暗号）の入門教材として有効です。 |
| 👩‍🏫 教育者・講師 | セキュリティや情報リテラシーの授業で暗号の可視化教材を探している教育関係者。授業内実演にも適しています。 |
| 🧑‍🎓 CTF参加者 | 転置式暗号の仕組みを理解し、解読演習の基礎訓練を行いたい人。総当たりアプローチの実践学習にも最適です。 |
| 🛠️ セキュリティ愛好家 | 古典暗号の構造や脆弱性に興味を持つホビイスト・ハッカー層。自作解読ツール開発の参考にもなります。 |
| 📖 自学者 | 書籍やWeb教材と併用し、実際に手を動かして理解を深めたい自主学習者。英語圏を含む幅広い学習者に対応しています。 |

### 🧠 本ツールの特徴がターゲットに訴求する理由

- **操作が直感的**：ビジュアルUIで迷わず使える
- **構造が見える**：平文から暗号文への流れを視覚化
- **知識が深まる**：座学タブで仕組みや弱点も学べる
- **試せる自由度**：日本語・記号・空白など現実的な文字列も扱える
- **CTF対策にも**：総当たり解読の考え方に触れられる

---

## 📖 レールフェンス暗号について

### 🎯 概要

レールフェンス暗号（Rail Fence Cipher）は、**転置式暗号**の一種で、平文の文字を鉄道のレール状に配置して並び順を変えることで暗号化する古典暗号です。

その名前は、文字の配置パターンが鉄道のレール（rail fence）に似ていることに由来します。

また、柵のような形をしていますので、柵型暗号と呼ばれることもあります。

### 歴史的背景

暗号史の黎明期では一般的な方法でしたが、中世のノーメンクレイター、15世紀と16世紀のコードブックなど、より複雑な方法が登場することで、レールフェンス暗号は廃れました。

しかし、アメリカの南北戦争の際に、多少息を吹き返し、南軍・北軍の両陣営が軍事通信を秘匿するためにレールフェンス暗号を使ったことがわかっています。

### ⚙️ 基本的な仕組み

1. **文字配置**：平文を複数のレール（行）に分けて配置
2. **読み取り**：各レールから順番に文字を読み取り
3. **暗号文生成**：読み取った順序で文字を連結して暗号文を作成

**例**：「HELLO」を3レールで暗号化
```
H . . L . O    →  HLO
. E . . L .    →  EL
. . L . . .    →  L
結果：HLEOL
```

### 📜 歴史的背景

- **古代起源**：古代ギリシャ・ローマ時代から使用されていた可能性
- **軍事利用**：19世紀から20世紀初頭にかけて軍事通信で活用
- **手紙暗号**：個人間の秘密通信でも広く使用
- **教育教材**：現代では暗号学の入門教材として重要な位置

### 🔍 使用例と用途

| 時代・分野 | 用途 | 特徴 |
|------------|------|------|
| **古典時代** | 軍事・外交通信 | 紙とペンだけで実行可能 |
| **19-20世紀** | 電信・無線通信 | 短い暗号文での秘匿通信 |
| **現代** | 教育・学習 | 暗号学の基礎概念習得 |
| **CTF競技** | 問題・解読演習 | 古典暗号分野の定番問題 |

### 🔄 暗号の亜種・バリエーション

1. **順次配置（方式1）**
   - 文字を順番に各レールに割り振り
   - **縦列転置暗号と同等**の処理

2. **ジグザグ配置（方式2）**
   - 上下に蛇行しながら文字を配置
   - より複雑な転置パターン

3. **変則レール数**
   - 可変レール数による複雑化
   - 位置依存のレール変更

4. **オフセット配置**
   - 開始位置をずらした配置
   - さらなるバリエーション増加

### 🔗 他の暗号との関係

| 暗号種類 | 類似点 | 相違点 |
|----------|--------|--------|
| **縦列転置暗号** | 転置の基本原理が同一 | レール概念の有無 |
| **単純置換暗号** | 古典暗号、手計算可能 | 転置 vs 置換（換字）の違い |
| **カエサル暗号** | 教育用入門暗号 | シフト vs 転置 |
| **ヴィジュネル暗号** | 多表式暗号の概念 | 多項式 vs 幾何学的 |

### 🛡️ セキュリティ強度

#### 強度の要因
- **レール数**：多いほど複雑（一般的に2〜6レール）
- **文字長**：長いほど解読困難
- **方式選択**：ジグザグ方式がやや複雑
- **言語特性**：日本語は英語より解読困難

#### 脆弱性
- **小さな鍵空間**：レール数×方式＝限定的な組み合わせ
- **頻度分析**：文字の出現頻度は保持される
- **パターン推測**：短文では配置が推測可能
- **総当たり攻撃**：現代では数秒で解読可能

### 🎯 典型的な解読手法

1. **総当たり攻撃**
   - 全レール数・方式組み合わせを試行
   - 可読性による結果評価

2. **頻度分析**
   - 言語の文字出現頻度と照合
   - 統計的手法による絞り込み
   - 転置式暗号という特性上、ダミー文字や冗字がなければ、平文の頻度分布と合致する。そのため「暗号文の頻度分布」と「対象言語の頻度分布」とほぼ同じであれば、転置式暗号文と推定される。

3. **辞書攻撃**
   - 既知単語とのパターンマッチング
   - 部分文字列の特定

4. **文脈推測**
   - 部分解読結果からの推測
   - 人間の直感的判断

### 💡 教育的価値

- **暗号学入門**：転置暗号の基礎理解
- **視覚的理解**：幾何学的な暗号化過程
- **セキュリティ意識**：古典暗号の限界認識
- **アルゴリズム思考**：手順の論理的理解
- **CTF準備**：古典暗号問題への対策

---

## 🔧 主な機能と構成

### 🔐 暗号化タブ

- **平文入力**：任意の文字列（アルファベット・日本語・記号・空白・改行すべて対応）
- **サンプル機能**：学習用のサンプル文章（英語・日本語）をワンクリック読み込み
  - サンプル2（「アス　ゴゴロクジニ　ヨコハマエキニシグチニ　シュウゴウ」）は、『暗号事典』（研究社刊）P.656に掲載されている平文を採用。
- **リアルタイム処理**：
  - 入力と同時に暗号化を実行するリアルタイムモード
  - 文字数制限と警告表示（500文字上限、段階的警告）
  - 記号・空白・改行の存在を自動検出・通知
- **オプション設定**：
  - 空白を除いて処理する
  - 記号を除いて処理する
- **レール設定**：
  - レール数：2〜6（プルダウン）
  - 方式選択：
    - 方式1：順次配置（縦列転置暗号）
    - 方式2：ジグザグ配置（蛇行構造）
- **視覚化機能**：
  - カラフルなレールグリッド表示
  - 文字配置過程のアニメーション（速度調整可能）
  - 中間状態の詳細表示
- **エクスポート機能**：
  - 📷 レール配置の画像保存（PNG形式）
  - 📄 設定と結果のテキスト保存
  - 🖨 印刷機能

---

### 🔓 復号タブ

- **暗号文入力**：復号したい暗号文の入力
- **設定同期**：暗号化タブの設定と暗号文を自動取得
- **サンプル機能**：学習用のサンプル暗号文をワンクリック読み込み
- **リアルタイム復号**：入力と同時に復号を実行
- **視覚的復号過程**：
  - レール配置から平文復元までを可視化
  - アニメーション機能で復号過程を段階表示
- **文字数制限**：暗号化タブと同様の制限・警告システム
- **エクスポート機能**：復号結果の保存・印刷

---

### 📚 座学タブ

- **基礎知識**：レールフェンス暗号の歴史と概要
- **方式詳細**：方式1と方式2の違いを視覚的に解説
- **セキュリティ分析**：
  - 暗号化強度の要因（レール数、文字長、方式）
  - セキュリティの弱点（頻度分析、鍵空間、総当たり攻撃）
- **攻撃と防御**：
  - 攻撃者の手法（総当たり、頻度分析、辞書攻撃、文脈推測）
  - 防御の改善方法（他暗号との組み合わせ、ダミー文字挿入等）
- **学習ガイド**：効果的な学習手順とツール活用法
- **現代暗号学への発展**：公開鍵暗号など現代技術との関連性

---

### 🧪 実験室タブ

- **総当たり解読実験**：
  - さまざまなレール数・方式で復号を自動試行
  - 可読性スコアによる結果の自動評価・ランキング
  - スコアリング方式の詳細説明
- **統計実験**：
  - 異なる設定での暗号化効果を比較分析
  - 文字の移動距離とエントロピー変化を数値化
  - 最適な暗号化設定の自動判定

---

## 📂 ディレクトリー構成

```
railfence-cipherlab/
├── index.html                 # メインHTMLファイル
├── style.css                  # スタイルシート
├── js/                        # JavaScript モジュール
│   ├── common.js              # 共通機能（タブ切り替え、Toast等）
│   ├── encrypt.js             # 暗号化タブの機能
│   ├── decrypt.js             # 復号タブの機能
│   └── lab.js                 # 実験室タブの機能
├── assets/                    # 静的ファイル
│   └── screenshot.png         # スクリーンショット
├── LICENSE                    # MITライセンス
├── .gitignore                 # Git除外設定
└── README.md                  # このファイル
```

---

## 🎮 使い方

### 基本的な操作手順

1. **学習準備**：座学タブでレールフェンス暗号の基礎を学習
2. **暗号化体験**：暗号化タブでサンプル文章を使って操作を体験
3. **復号理解**：復号タブで逆向きの処理を理解
4. **実践演習**：実験室タブで総当たり攻撃や統計分析を体験
5. **応用学習**：自分なりの文章でさまざまな設定を試行

### 💡 効果的な学習のコツ

- **アニメーション活用**：文字配置過程をスローモーションで観察
- **設定比較**：同じ文章を異なる設定で暗号化して違いを確認
- **総当たり体験**：短い暗号文で解読の困難さを実感
- **統計分析**：数値で暗号化効果を客観的に理解

---

## ⚠️ 注意事項・制限

- **教育目的専用**：実際のセキュリティ用途には使用できません
- **暗号強度**：レールフェンス暗号は現代では脆弱な暗号方式です
- **データ保存**：ブラウザーのローカルストレージは使用しません
- **オフライン動作**：インターネット接続不要で動作します
- **ブラウザー対応**：モダンブラウザー（Chrome, Firefox, Safari, Edge）推奨

---

## 🔧 技術仕様

### フロントエンド技術

- **HTML5**：セマンティックマークアップ
- **CSS3**：
  - CSS Grid Layout（レール配置表示）
  - CSS Animations（文字配置アニメーション）
  - Responsive Design（レスポンシブ対応）
- **JavaScript (ES6+)**：
  - モジュール分割設計
  - Canvas API（画像エクスポート）
  - Web APIs（Clipboard, File Download）

### 暗号化アルゴリズム

- **方式1（順次配置）**：縦列転置暗号と同等の処理
- **方式2（ジグザグ配置）**：蛇行パターンによる転置
- **可変パラメーター**：2〜6レール、2つの配置方式

### パフォーマンス

- **文字数制限**：500文字（教育用途に最適化）
- **アニメーション**：60fps対応、速度調整可能
- **レスポンシブ**：800px幅を基準とした設計

---

## 📄 ライセンス

MIT License - 詳細は [LICENSE](LICENSE) をご覧ください。

---

## 🛠 このツールについて

本ツールは、「生成AIで作るセキュリティツール100」プロジェクトの一環として開発されました。 このプロジェクトでは、AIの支援を活用しながら、セキュリティに関連するさまざまなツールを100日間にわたり制作・公開していく取り組みを行っています。

プロジェクトの詳細や他のツールについては、以下のページをご覧ください。

🔗 [https://akademeia.info/?page_id=42163](https://akademeia.info/?page_id=42163)
